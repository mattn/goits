{{define "content"}}

{{$project := .project}}
<div class="row-fluid">
  <div class="span12">
    <h1>{{$project.Name}}</h1>
    <div id="ticket_list">
      <h3>ticket list by status</h3>
      <div class="description">display unclosed tickets.</div>
      {{range .notClosedStates}}
        <a href="#state{{.Id}}" title="link to part of this page">{{.Name}} ({{.Count}})</a>&nbsp;
      {{end}}
      {{$elementTypes := .elementTypes}}
      {{range .ticketsByStatus}}
        <h4 class="status">{{.State.Name}} ({{.State.Count}})</h4>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>ID</th>
              {{range $elementTypes}}
                {{if .DisplayInList}}
                  <th>{{.Name}}</th>
                {{end}}
              {{end}}
              <th>registered</th>
              <th>modified</th>
              <th>passed days</th>
            </tr>
          </thead>
          <tbody>
            {{range .SearchResult.Messages}}
              {{$ticket := .}}
              <tr>
                {{range .Elements}}
                  {{if .ElementType.DisplayInList}}
                    <td class="field{{.ElementType.Id}} field{{.ElementType.Id}}-{{.GetSelectedItemId}}">
                      {{if .HasTicketLink}}
                        <a href="{{$project.Url}}/ticket/{{$ticket.Id}}">{{.StrVal}}</a>
                      {{else}}
                        {{.StrVal}}
                      {{end}}
                    </td>
                  {{end}}
                {{end}}
              </tr>
            {{end}}
          </tbody>
        </table>
      {{end}}
    </div>
</div>
{{end}}
<!-- vim: set ts=2 sw=2 sts=2 expandtab fenc=utf-8: -->
